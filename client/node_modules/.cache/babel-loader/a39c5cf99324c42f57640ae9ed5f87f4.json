{"ast":null,"code":"var _jsxFileName = \"/home/ruart/Desktop/eatwise/client/src/components/SearchShop.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport './CSS/SearchBar.css';\nimport pic1 from '../pictures/3.jpg';\nimport StarRatingComponent from 'react-star-rating-component';\nimport Image from 'react-bootstrap/Image';\nimport { Button } from 'react-bootstrap';\nimport { searchAllShops } from './UserFunctions.js';\n\nclass SearchShop extends Component {\n  constructor() {\n    super();\n    this.state = {\n      shops: [],\n      total: 0\n    };\n    this.searchShop = this.searchShop.bind(this);\n    this.randomize = this.randomize.bind(this);\n  }\n\n  searchShop(e) {\n    const query = e.target.value; // fetch('http://localhost:2019/search-all-shops/?name='+query)\n    //       .then((response) => { return response.json() })\n    //       .then((result) => {\n    //           console.log(result)\n    //           this.setState({shops: result})\n    //       })\n    //       .catch((e) => { console.log(e)});\n\n    searchAllShops(query);\n  }\n\n  randomize() {\n    const array = [];\n    var min = 1;\n    const rand = Math.floor(min + Math.random() * (this.state.total - min));\n    console.log(rand);\n    fetch('http://localhost:2019/view-shops/').then(response => {\n      return response.json();\n    }).then(result => {\n      console.log(result[rand]);\n      array.push(result[rand]);\n      console.log(array);\n      this.setState({\n        shops: array\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  componentDidMount() {// fetch('http://localhost:2019/view-shops/')\n    //         .then((response) => { return response.json() })\n    //         .then((result) => {\n    //             console.log(result)\n    //             this.setState({shops: result})\n    //             this.setState({total: result.length})\n    //         })\n    //         .catch((e) => { console.log(e)});\n  }\n\n  render() {\n    {\n      /*Function for returning all shops that match the searched word*/\n    }\n\n    const Suggestions = props => {\n      const data = props;\n      const options = this.state.shops.map(r => React.createElement(Link, {\n        to: \"/shop/?shopName=\" + r.name + \"&shopId=\" + r.shopId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        class: \"text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        key: r.shopId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Image, {\n        class: \"d-block w-100\",\n        src: pic1,\n        alt: \"Third slide\",\n        className: \"pic2\",\n        rounded: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, r.name, React.createElement(StarRatingComponent, {\n        editing: false,\n        starCount: 5,\n        value: r.votes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }))), React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Description: \", r.description, \" \")))))))));\n      return React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, options);\n    };\n\n    return React.createElement(\"body\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"article\", {\n      className: \"csearch-bars\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"search\",\n      name: \"Search\",\n      placeholder: \"Search for restaurants...\",\n      value: this.state.query,\n      onChange: this.searchShop,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), React.createElement(Suggestions, {\n      results: this.state.shops,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default SearchShop;","map":{"version":3,"sources":["/home/ruart/Desktop/eatwise/client/src/components/SearchShop.js"],"names":["React","Component","Link","withRouter","pic1","StarRatingComponent","Image","Button","searchAllShops","SearchShop","constructor","state","shops","total","searchShop","bind","randomize","e","query","target","value","array","min","rand","Math","floor","random","console","log","fetch","then","response","json","result","push","setState","catch","componentDidMount","render","Suggestions","props","data","options","map","r","name","shopId","votes","description"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link, withRouter } from 'react-router-dom'\nimport './CSS/SearchBar.css';\nimport pic1 from '../pictures/3.jpg'\nimport StarRatingComponent from 'react-star-rating-component';\nimport Image from 'react-bootstrap/Image'\nimport { Button } from 'react-bootstrap';\nimport { searchAllShops} from './UserFunctions.js'\nclass SearchShop extends Component {\n  constructor(){\n        super()\n        this.state = {\n            shops: [],\n            total: 0\n        }\n        this.searchShop = this.searchShop.bind(this)\n        this.randomize = this.randomize.bind(this)\n  }\n\n  searchShop(e){\n    const query = e.target.value;\n\n    // fetch('http://localhost:2019/search-all-shops/?name='+query)\n    //       .then((response) => { return response.json() })\n    //       .then((result) => {\n    //           console.log(result)\n    //           this.setState({shops: result})\n    //       })\n    //       .catch((e) => { console.log(e)});\n\n    searchAllShops(query)\n  }\n\n  randomize(){\n    const array = []\n    var min = 1;\n    const rand = Math.floor(min + Math.random() * (this.state.total - min));\n    console.log(rand)\n    fetch('http://localhost:2019/view-shops/')\n            .then((response) => { return response.json() })\n            .then((result) => {\n                console.log(result[rand])\n                array.push(result[rand])\n                console.log(array)\n                this.setState({shops: array})\n            })\n            .catch((e) => { console.log(e)});\n\n  }\n\n\n  componentDidMount(){\n    // fetch('http://localhost:2019/view-shops/')\n    //         .then((response) => { return response.json() })\n    //         .then((result) => {\n    //             console.log(result)\n    //             this.setState({shops: result})\n    //             this.setState({total: result.length})\n    //         })\n    //         .catch((e) => { console.log(e)});\n  }\n\n    render () {\n        {/*Function for returning all shops that match the searched word*/}\n        const Suggestions = (props) => {\n          const data = props  \n          const options = this.state.shops.map((r) => (\n            <Link to={\"/shop/?shopName=\"+r.name+\"&shopId=\"+r.shopId}> \n              <div className=\"search-item\">\n                <table class = \"text-left\">\n                  \n                    <td> \n                      <li key={r.shopId}>\n                        <div class=\"image\">\n                          <Image class=\"d-block w-100\" src={pic1} alt=\"Third slide\" className=\"pic2\" rounded/>\n                          <h5><span>\n                            {r.name}\n                            <StarRatingComponent \n                              editing={false}\n                              starCount={5}\n                              value={r.votes}\n                            />\n                          </span></h5>\n                          <h6><span>Description: {r.description} </span></h6>\n                          \n                        </div>\n                    </li>\n                    </td>\n                  \n               </table>\n              </div>\n            </Link>\n          ))\n          return <ul>{options}</ul>\n        }\n\n        return (\n              <body>\n                  {/*=================Search bar & results =================*/}\n                    <article className=\"csearch-bars\">\n                      <input type=\"text\" \n                        className=\"search\" \n                        name=\"Search\"\n                        placeholder=\"Search for restaurants...\"\n                        value={this.state.query}\n                        onChange={this.searchShop}\n                      />\n                    </article>\n\n                 \n                  <Suggestions results = {this.state.shops} />\n                {/*=========================================================*/}\n                \n              </body>            \n        )\n    }\n}\n\nexport default SearchShop"]},"metadata":{},"sourceType":"module"}