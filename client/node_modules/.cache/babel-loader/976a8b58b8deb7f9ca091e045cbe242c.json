{"ast":null,"code":"var _jsxFileName = \"/home/ruart/Desktop/eatwise/client/src/components/SearchShop.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom'; // import './../App.css';\n\nimport pic1 from '../pictures/3.jpg';\nimport StarRatingComponent from 'react-star-rating-component';\nimport Image from 'react-bootstrap/Image';\nimport { Button } from 'react-bootstrap';\n\nclass SearchShop extends Component {\n  constructor() {\n    super();\n    this.state = {\n      shops: [],\n      total: 0\n    };\n    this.searchShop = this.searchShop.bind(this);\n    this.randomize = this.randomize.bind(this);\n  }\n\n  searchShop(e) {\n    const query = e.target.value;\n    fetch('http://localhost:3001/search-all-shops/?name=' + query).then(response => {\n      return response.json();\n    }).then(result => {\n      console.log(result);\n      this.setState({\n        shops: result\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  randomize() {\n    const array = [];\n    var min = 1;\n    const rand = Math.floor(min + Math.random() * (this.state.total - min));\n    console.log(rand);\n    fetch('http://localhost:3001/view-shops/').then(response => {\n      return response.json();\n    }).then(result => {\n      console.log(result[rand]);\n      array.push(result[rand]);\n      console.log(array);\n      this.setState({\n        shops: array\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:3001/view-shops/').then(response => {\n      return response.json();\n    }).then(result => {\n      console.log(result);\n      this.setState({\n        shops: result\n      });\n      this.setState({\n        total: result.length\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  render() {\n    {\n      /*Function for returning all shops that match the searched word*/\n    }\n\n    const Suggestions = props => {\n      const data = props;\n      const options = this.state.shops.map(r => React.createElement(Link, {\n        to: \"/shop/?shopName=\" + r.name + \"&shopId=\" + r.shopId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        class: \"text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        key: r.shopId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Image, {\n        class: \"d-block w-100\",\n        src: pic1,\n        alt: \"Third slide\",\n        className: \"pic2\",\n        rounded: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, r.name, React.createElement(StarRatingComponent, {\n        editing: false,\n        starCount: 5,\n        value: r.votes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }))), React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Description: \", r.description, \" \")))))))));\n      return React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, options);\n    };\n\n    return React.createElement(\"body\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"article\", {\n      className: \"csearch-bar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"search-button\",\n      onClick: this.randomize,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Randomize\"), React.createElement(\"article\", {\n      className: \"csearch-bars\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"sTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Eatwise - Elbi Food Establishment Companion\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"search\",\n      placeholder: \"Search for restaurants...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"search-bar\",\n      name: \"Search\",\n      placeholder: \"Search for restaurants...\",\n      value: this.state.query,\n      onChange: this.searchShop,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(Suggestions, {\n      results: this.state.shops,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default SearchShop;","map":{"version":3,"sources":["/home/ruart/Desktop/eatwise/client/src/components/SearchShop.js"],"names":["React","Component","Link","withRouter","pic1","StarRatingComponent","Image","Button","SearchShop","constructor","state","shops","total","searchShop","bind","randomize","e","query","target","value","fetch","then","response","json","result","console","log","setState","catch","array","min","rand","Math","floor","random","push","componentDidMount","length","render","Suggestions","props","data","options","map","r","name","shopId","votes","description"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link, withRouter } from 'react-router-dom'\n// import './../App.css';\nimport pic1 from '../pictures/3.jpg'\nimport StarRatingComponent from 'react-star-rating-component';\nimport Image from 'react-bootstrap/Image'\nimport { Button } from 'react-bootstrap';\n\nclass SearchShop extends Component {\n  constructor(){\n        super()\n        this.state = {\n            shops: [],\n            total: 0\n        }\n        this.searchShop = this.searchShop.bind(this)\n        this.randomize = this.randomize.bind(this)\n  }\n\n  searchShop(e){\n    const query = e.target.value;\n\n    fetch('http://localhost:3001/search-all-shops/?name='+query)\n          .then((response) => { return response.json() })\n          .then((result) => {\n              console.log(result)\n              this.setState({shops: result})\n          })\n          .catch((e) => { console.log(e)});\n\n  }\n\n  randomize(){\n    const array = []\n    var min = 1;\n    const rand = Math.floor(min + Math.random() * (this.state.total - min));\n    console.log(rand)\n    fetch('http://localhost:3001/view-shops/')\n            .then((response) => { return response.json() })\n            .then((result) => {\n                console.log(result[rand])\n                array.push(result[rand])\n                console.log(array)\n                this.setState({shops: array})\n            })\n            .catch((e) => { console.log(e)});\n\n  }\n\n\n  componentDidMount(){\n    fetch('http://localhost:3001/view-shops/')\n            .then((response) => { return response.json() })\n            .then((result) => {\n                console.log(result)\n                this.setState({shops: result})\n                this.setState({total: result.length})\n            })\n            .catch((e) => { console.log(e)});\n  }\n\n    render () {\n        {/*Function for returning all shops that match the searched word*/}\n        const Suggestions = (props) => {\n          const data = props  \n          const options = this.state.shops.map((r) => (\n            <Link to={\"/shop/?shopName=\"+r.name+\"&shopId=\"+r.shopId}> \n              <div className=\"search-item\">\n                <table class = \"text-left\">\n                  \n                    <td> \n                      <li key={r.shopId}>\n                        <div class=\"image\">\n                          <Image class=\"d-block w-100\" src={pic1} alt=\"Third slide\" className=\"pic2\" rounded/>\n                          <h5><span>\n                            {r.name}\n                            <StarRatingComponent \n                              editing={false}\n                              starCount={5}\n                              value={r.votes}\n                            />\n                          </span></h5>\n                          <h6><span>Description: {r.description} </span></h6>\n                          \n                        </div>\n                    </li>\n                    </td>\n                  \n               </table>\n              </div>\n            </Link>\n          ))\n          return <ul>{options}</ul>\n        }\n\n        return (\n              <body>\n                  {/*=================Search bar & results =================*/}\n                <article className=\"csearch-bar\">\n                  <Button className = \"search-button\"\n                    onClick = {this.randomize} \n                    >Randomize</Button>\n\n                    <article className=\"csearch-bars\">\n                      <h2 className=\"sTitle\">Eatwise - Elbi Food Establishment Companion</h2>\n                      <input type=\"text\" className=\"search\" placeholder=\"Search for restaurants...\" />\n                    </article>\n                  <input type=\"text\"\n                    className=\"search-bar\"\n                    name=\"Search\"\n                    placeholder=\"Search for restaurants...\"\n                    value={this.state.query}\n                    onChange={this.searchShop}\n                  />\n                  <Suggestions results = {this.state.shops} />\n                {/*=========================================================*/}\n                </article>\n              </body>            \n        )\n    }\n}\n\nexport default SearchShop"]},"metadata":{},"sourceType":"module"}